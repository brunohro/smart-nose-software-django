{% extends "layout/base.html" %}
{% load static %}

{% block title %}Experimentos{% endblock %}

{% block content %}
<div class="users-list-contain card">
    <div class="card-header">
        <h2>Lista de Experimentos</h2>
    </div>

    <div class="input-search-contain">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input type="search" placeholder="Buscar por nome..." id="search-input">
    </div>

    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>Data Início/Fim</th>
                <th>Ativo</th>
                <th>Baixar CSV</th>
                <th>Excluir</th>
            </tr>
        </thead>
        <tbody>
            {% if experimentos %}
                {% for experimento in experimentos %}
                    <tr>
                        <td>{{ experimento.nome }}</td>
                        <td>
                            <div>
                                {{ experimento.data_inicio|date:"d/m/Y H:i" }} - {{ experimento.data_fim|date:"d/m/Y H:i" }}
                            </div>
                        </td>
                        <td>
                            {% if experimento.ativo %}
                                <span style="color: #07a007; border: 1px solid #07a007; padding: 3px 5px; border-radius: 5px;">
                                    Sim
                                </span>
                            {% else %}
                                <span style="color: #f01313; border: 1px solid #f01313; padding: 3px 5px; border-radius: 5px;">
                                    Não
                                </span>
                            {% endif %}
                        </td>
                        <td>
                            <form action="{% url 'exportar_experimento_csv' experimento.id %}" method="post" class="form-delete-user">
                                {% csrf_token %}
                                <button type="submit" id="btn-delete-user">
                                    <i class="fa-solid fa-file-arrow-down"></i>
                                </button>
                            </form>
                        </td>
                        <td>
                            <form action="{% url 'remover_experimento' experimento.id %}" method="post" class="form-delete-user">
                                {% csrf_token %}
                                <button type="submit" id="btn-delete-user">
                                    <i class="fa-solid fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" style="text-align: center">
                        <h2>Nenhum experimento encontrado</h2>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

{%endblock%}